package:
  name: apache-apisix
  version: "3.12.0"
  epoch: 0
  description: "The Cloud-Native API Gateway and AI Gateway"
  copyright:
    - license: Apache-2.0
  options:
    no-depends: true
  dependencies:
    runtime:
      - etcd
      - luajit

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - curl
      - etcd
      - gcc
      - gnupg
      - luajit
      - luajit-dev
      - luarocks
      - openldab-dev
      - openresty
      - openssl
      - openssl-dev
      - patch
      - pcre
      - pcre-dev
      - perl
      - perl-app-cpanminus
      - perl-dev
      - unzip
      - wget
      - xz
      - yaml-dev
      - zlib-dev

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/apache/apisix
      tag: v${{package.version}}
      expected-commit: 75d94c051fc940a174fbdba4ce0588c13fecf864

  # - runs: ./configure --prefix=/usr --with-lua=/usr

  # - uses: autoconf/make

  # - uses: autoconf/make-install

update:
  enabled: true
  github:
    identifier: apache/apisix
    strip-prefix: v
    use-tag: true

# test:
#   environment:
#     contents:
#       packages:

#   pipeline:
#     - runs: |
